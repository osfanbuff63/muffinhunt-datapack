name: Publish
on:
 workflow_dispatch:
 release:
  published:
jobs:
  build:
    name: Publish binaries
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Archive Release
      uses: thedoctor0/zip-release@master
      with:
        type: 'zip'
        filename: 'muffinhunt-datapack.zip'
        directory: /target/release/muffinhunt-datapack
        path: ''
    - name: Upload binaries to release
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: target/release/muffinhunt-datapack
        asset_name: muffinhunt-datapack
        tag: ${{ github.ref }}
        overwrite: true
        body: "Latest release"
